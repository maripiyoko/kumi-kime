webpackJsonp([0],[,,,,function(e,t,s){s(13);var l=s(0)(s(6),s(17),null,null);e.exports=l.exports},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s(14),n=s.n(l),a=s(15),i=s.n(a);t.default={name:"app",components:{BoxList:n.a,PlayerList:i.a},data:function(){return{boxPlayers:[],remainingPlayers:[]}},methods:{players_callback:function(e){var t=this.$refs.boxref.boxes,s=t.slice(),l=[];s.forEach(function(t){var s=e.filter(function(e){return e.choices.indexOf(t.id)>=0});l[t.id]={box:t,players:s}});var n=l.slice();n.sort(function(e,t){return e.players.length-e.box.num_requirements-(t.players.length-t.box.num_requirements)||t.box.num_requirements-e.box.num_requirements});var a=[];n.forEach(function(e){var t=_.difference(e.players,a);t.sort(function(t,s){return t.choices.indexOf(e.box.id)>s.choices.indexOf(e.box.id)}),e.players=t.slice(0,e.box.num_requirements),a=a.concat(e.players),e.players.forEach(function(t){t.boxId=e.box.id})}),n.forEach(function(e){console.log(e.box.id+". "+e.box.name+"("+e.box.num_requirements+")"),e.players.forEach(function(e){console.log("\t"+e.name+" : "+e.choices.join(","))})}),this.remainingPlayers=_.difference(e,a),this.remainingPlayers.forEach(function(e){console.log("\t"+e.name+" : "+e.choices.join(","))}),this.boxPlayers=l}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s(1),n=s.n(l),a={fetch:function(){var e=JSON.parse(localStorage.getItem("boxes-list")||"[]");return e.forEach(function(e,t){e.id||(e.id=t+1)}),a.uid=e.length,e},save:function(e){localStorage.setItem("boxes-list",n()(e))}};t.default={name:"box-list",props:["remainingPlayers"],data:function(){return{name:"役決め",newBox:"",boxes:a.fetch(),editedBox:null}},watch:{boxes:{handler:function(e){a.save(e)},deep:!0}},methods:{addBox:function(){var e=this.newBox&&this.newBox.trim();e&&(this.boxes.push({id:++a.uid,name:e,num_requirements:2}),this.newBox="")},editBoxName:function(e){alert("editBoxName"),this.beforeEditCache=e.name,this.editedBox=e},editBoxNum:function(e){this.beforeEditCache=e.num_requirements,this.editedBox=e},doneNameEdit:function(e){this.editedBox&&(this.editedBox=null,e.name=e.name.trim(),e.name||this.removeBox(e))},doneNumEdit:function(e){this.editedBox&&(this.editedBox=null,e.num_requirements||this.removeBox(e))},cancelNameEdit:function(e){this.editedBox=null,e.name=this.beforeEditCache},cancelNumEdit:function(e){this.editedBox=null,e.num_requirements=this.beforeEditCache},removeBox:function(e){this.boxes.splice(this.boxes.indexOf(e),1)},clearAllBoxes:function(){this.boxes=[]}},directives:{"box-focus":function(e,t){t&&e.focus()}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s(1),n=s.n(l),a={fetch:function(){var e=JSON.parse(localStorage.getItem("players-list")||"[]");return e.forEach(function(e,t){e.id=t}),a.uid=e.length,e},save:function(e){localStorage.setItem("players-list",n()(e))}};t.default={name:"player-list",props:["boxPlayers"],data:function(){return{name:"参加者一覧",newPlayer:"",importingPlayersCsv:"",players:a.fetch(),editedPlayer:null}},watch:{players:{handler:function(e){a.save(e)},deep:!0}},methods:{isNoPlayer:function(){return 0==this.players.length},addPlayer:function(){var e=this.newPlayer&&this.newPlayer.trim();e&&(this.players.push({id:a.uid++,name:e,choices:[],boxId:""}),this.newPlayer="")},clearAllPlayers:function(){this.players=[]},importPlayers:function(){var e=this.importingPlayersCsv&&this.importingPlayersCsv.trim();if(e){var t=e.split("\n"),s=[];t.forEach(function(e,t){var l=e.split(",");s.push({id:t,name:l[0].trim(),choices:l.slice(1).map(function(e){return parseInt(e)}),boxId:""})}),s.length>0&&(this.players=s)}},matchBoxPlayers:function(){this.$emit("matchBoxPlayers",this.players)}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s(5),n=s(4),a=s.n(n);l.a.config.productionTip=!1,window._=s(3),new l.a({el:"#app",template:"<App/>",components:{App:a.a}})},,,function(e,t){},function(e,t){},function(e,t,s){s(12);var l=s(0)(s(7),s(16),null,null);e.exports=l.exports},function(e,t,s){var l=s(0)(s(8),s(18),null,null);e.exports=l.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mdl-cell mdl-cell--6-col",attrs:{id:"box-list"}},[s("div",[s("h3",[e._v(e._s(e.name))]),e._v(" "),s("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-js-textfield mdl-textfield--floating-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newBox,expression:"newBox"}],staticClass:"new-box mdl-textfield__input",attrs:{id:"new_box",type:"text",autofocus:"",autocomplete:"off",placeholder:""},domProps:{value:e.newBox},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.addBox(t)},input:function(t){t.target.composing||(e.newBox=t.target.value)}}}),e._v(" "),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"new_box"}},[e._v("新しい役の名前")])]),e._v(" "),s("span",[e._v("("+e._s(e.boxes.length)+")")])]),e._v(" "),s("div",[s("table",{directives:[{name:"show",rawName:"v-show",value:e.boxes.length,expression:"boxes.length"}],staticClass:"mdl-data-table mdl-js-data-table mdl-shadow--2dp"},[e._m(0),e._v(" "),s("tbody",e._l(e.boxes,function(t){return s("tr",{key:t.id,staticClass:"box"},[s("td",[e._v(e._s(t.id))]),e._v(" "),s("td",{staticClass:"mdl-data-table__cell--non-numeric"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"box.name"}],staticClass:"mdl-textfield__input",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),e._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.num_requirements,expression:"box.num_requirements"}],staticClass:"mdl-textfield__input num-input",attrs:{type:"text",pattern:"[0-9]*"},domProps:{value:t.num_requirements},on:{input:function(e){e.target.composing||(t.num_requirements=e.target.value)}}})]),e._v(" "),s("td",[s("button",{staticClass:"mdl-button mdl-js-button mdl-button--icon",on:{click:function(s){e.removeBox(t)}}},[s("i",{staticClass:"material-icons"},[e._v("remove")])])])])}))])]),e._v(" "),s("div",[s("ul",{staticClass:"mdl-list"},e._l(e.remainingPlayers,function(t){return s("li",{staticClass:"player mdl-list__item"},[e._v("\n        "+e._s(t)+"\n      ")])}))]),e._v(" "),s("hr"),e._v(" "),s("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect",on:{click:function(t){e.clearAllBoxes()}}},[e._v("\n    役を全部クリアする\n  ")])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("th",[e._v("ID")]),e._v(" "),s("th",{staticClass:"mdl-data-table__cell--non-numeric"},[e._v("役の名前")]),e._v(" "),s("th",[e._v("数")]),e._v(" "),s("th")])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mdl-grid",attrs:{id:"app"}},[s("box-list",{ref:"boxref",attrs:{boxPlayers:e.boxPlayers,remainingPlayers:e.remainingPlayers}}),e._v(" "),s("player-list",{attrs:{boxPlayers:e.boxPlayers},on:{matchBoxPlayers:e.players_callback}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mdl-tabs mdl-js-tabs mdl-js-ripple-effect　mdl-cell mdl-cell--6-col"},[s("div",{staticClass:"mdl-tabs__tab-bar"},[s("a",{staticClass:"mdl-tabs__tab",class:{"is-active":e.isNoPlayer()},attrs:{href:"#players-load-panel"}},[e._v("参加者の登録")]),e._v(" "),s("a",{staticClass:"mdl-tabs__tab",class:{"is-active":!e.isNoPlayer()},attrs:{href:"#players-match-panel"}},[e._v("結果確認")])]),e._v(" "),s("div",{staticClass:"mdl-tabs__panel is-active",attrs:{id:"players-load-panel"}},[s("div",{attrs:{id:"player-list"}},[s("h4",[e._v("1人ずつ登録")]),e._v(" "),s("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPlayer,expression:"newPlayer"}],staticClass:"new-box mdl-textfield__input",attrs:{id:"new_player",type:"text",autofocus:"",autocomplete:"off",placeholder:""},domProps:{value:e.newPlayer},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.addPlayer(t)},input:function(t){t.target.composing||(e.newPlayer=t.target.value)}}}),e._v(" "),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"new_player"}},[e._v("新しい参加者の名前")])]),e._v(" "),s("h4",[e._v("まとめて登録")]),e._v(" "),s("div",{staticClass:"mdl-grid"},[s("div",{staticClass:"mdl-cell mdl-cell--8-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.importingPlayersCsv,expression:"importingPlayersCsv"}],staticClass:"mdl-textfield__input",attrs:{id:"players_batch_import",type:"text",rows:"10"},domProps:{value:e.importingPlayersCsv},on:{input:function(t){t.target.composing||(e.importingPlayersCsv=t.target.value)}}}),e._v(" "),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"players_batch_import"}},[e._v("取り込む参加者をコピペで貼り付けてください")])]),e._v(" "),s("div",{staticClass:"mdl-cell mdl-cell--4-col"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent",on:{click:function(t){e.importPlayers()}}},[e._v("\n            取り込み\n          ")]),e._v(" "),s("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect",staticStyle:{"margin-top":"100px"},on:{click:function(t){e.clearAllPlayers()}}},[e._v("\n            参加者を全部クリアする\n          ")])])]),e._v(" "),s("ul",{staticClass:"mdl-list"},e._l(e.players,function(t){return s("li",{staticClass:"player mdl-list__item"},[e._v("\n          "+e._s(t.id)+". "+e._s(t.name)+" "+e._s(t.choices)+"\n        ")])}))])]),e._v(" "),s("div",{staticClass:"mdl-tabs__panel",attrs:{id:"players-match-panel"}},[s("h3",[e._v("結果を確認する")]),e._v(" "),s("div",[s("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent",on:{click:function(t){e.matchBoxPlayers()}}},[e._v("\n        組み合わせを探す\n      ")]),e._v(" "),s("ul",{staticClass:"mdl-list"},e._l(e.players,function(t){return s("li",{staticClass:"player mdl-list__item"},[e._v("\n          "+e._s(t.id)+". "+e._s(t.name)+" "+e._s(t.choices)+" : "+e._s(t.boxId)+"\n        ")])}))]),e._v(" "),s("div",[s("ul",{staticClass:"mdl-list"},e._l(e.boxPlayers,function(t){return s("li",{staticClass:"box-player mdl-list__item"},[e._v("\n          "+e._s(t)+"\n        ")])}))])])])},staticRenderFns:[]}}],[9]);
//# sourceMappingURL=app.3504578088db942f52fd.js.map