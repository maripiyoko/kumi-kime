webpackJsonp([0],[,,,,function(e,t,l){l(13);var a=l(0)(l(6),l(18),null,null);e.exports=a.exports},,function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(15),s=l.n(a),n=l(16),i=l.n(n);t.default={name:"app",components:{BoxList:s.a,PlayerList:i.a},data:function(){return{boxPlayers:[],remainingPlayers:[]}},methods:{players_callback:function(e){var t=this.$refs.boxref.boxes,l=t.slice(),a=[];l.forEach(function(t){var l=e.filter(function(e){return e.choices.indexOf(t.id)>=0});a.push({id:t.id,box:t,players:l})});var s=a.slice();s.sort(function(e,t){return e.players.length-e.box.num_requirements-(t.players.length-t.box.num_requirements)||t.box.num_requirements-e.box.num_requirements});var n=[];s.forEach(function(e){var t=_.difference(e.players,n);t.sort(function(t,l){return t.choices.indexOf(e.box.id)>l.choices.indexOf(e.box.id)}),e.players=t.slice(0,e.box.num_requirements),n=n.concat(e.players),e.players.forEach(function(t){t.boxId=e.box.id})}),s.forEach(function(e){console.log(e.box.id+". "+e.box.name+"("+e.box.num_requirements+")"),e.players.forEach(function(e){console.log("\t"+e.name+" : "+e.choices.join(","))})}),this.remainingPlayers=_.difference(e,n),this.remainingPlayers.forEach(function(e){console.log("\t"+e.name+" : "+e.choices.join(","))}),this.boxPlayers=a}}}},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(1),s=l.n(a),n={fetch:function(){var e=JSON.parse(localStorage.getItem("boxes-list")||"[]");return e.forEach(function(e,t){e.id||(e.id=t+1)}),n.uid=e.length,e},save:function(e){localStorage.setItem("boxes-list",s()(e))}};t.default={name:"box-list",props:["remainingPlayers"],data:function(){return{newBox:"",boxes:n.fetch(),editedBox:null}},watch:{boxes:{handler:function(e){n.save(e)},deep:!0}},methods:{addBox:function(){var e=this.newBox&&this.newBox.trim();e&&(this.boxes.push({id:++n.uid,name:e,num_requirements:2}),this.newBox="")},editBoxName:function(e){alert("editBoxName"),this.beforeEditCache=e.name,this.editedBox=e},editBoxNum:function(e){this.beforeEditCache=e.num_requirements,this.editedBox=e},doneNameEdit:function(e){this.editedBox&&(this.editedBox=null,e.name=e.name.trim(),e.name||this.removeBox(e))},doneNumEdit:function(e){this.editedBox&&(this.editedBox=null,e.num_requirements||this.removeBox(e))},cancelNameEdit:function(e){this.editedBox=null,e.name=this.beforeEditCache},cancelNumEdit:function(e){this.editedBox=null,e.num_requirements=this.beforeEditCache},removeBox:function(e){this.boxes.splice(this.boxes.indexOf(e),1)},clearAllBoxes:function(){this.boxes=[],n.uid=0}},directives:{"box-focus":function(e,t){t&&e.focus()}}}},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(1),s=l.n(a),n={fetch:function(){var e=JSON.parse(localStorage.getItem("players-list")||"[]");return e.forEach(function(e,t){e.id=t}),n.uid=e.length,e},save:function(e){localStorage.setItem("players-list",s()(e))}};t.default={name:"player-list",props:["boxPlayers","remainingPlayers"],data:function(){return{name:"参加者一覧",newPlayer:"",importingPlayersCsv:"",players:n.fetch(),editedPlayer:null}},watch:{players:{handler:function(e){n.save(e)},deep:!0}},methods:{isNoPlayer:function(){return 0==this.players.length},addPlayer:function(){var e=this.newPlayer&&this.newPlayer.trim();e&&(this.players.push({id:n.uid++,name:e,choices:[],boxId:""}),this.newPlayer="")},clearAllPlayers:function(){this.players=[]},importPlayers:function(){var e=this.importingPlayersCsv&&this.importingPlayersCsv.trim();if(e){var t=e.split("\n"),l=[];t.forEach(function(e,t){var a=e.split(",");l.push({id:t,name:a[0].trim(),choices:a.slice(1).map(function(e){return parseInt(e)}),boxId:""})}),l.length>0&&(this.players=l)}},matchBoxPlayers:function(){this.$emit("matchBoxPlayers",this.players)}}}},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(5),s=l(4),n=l.n(s);a.a.config.productionTip=!1,window._=l(3),new a.a({el:"#app",template:"<App/>",components:{App:n.a}})},,,function(e,t){},function(e,t){},function(e,t){},function(e,t,l){l(12);var a=l(0)(l(7),l(17),null,null);e.exports=a.exports},function(e,t,l){l(14);var a=l(0)(l(8),l(19),null,null);e.exports=a.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"mdl-cell mdl-cell--6-col",attrs:{id:"box-list"}},[l("div",[l("h3",[e._v("役の登録")]),e._v(" "),l("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-js-textfield mdl-textfield--floating-label"},[l("input",{directives:[{name:"model",rawName:"v-model",value:e.newBox,expression:"newBox"}],staticClass:"new-box mdl-textfield__input",attrs:{id:"new_box",type:"text",autofocus:"",autocomplete:"off",placeholder:""},domProps:{value:e.newBox},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.addBox(t)},input:function(t){t.target.composing||(e.newBox=t.target.value)}}}),e._v(" "),l("label",{staticClass:"mdl-textfield__label",attrs:{for:"new_box"}},[e._v("新しい役の名前")])]),e._v(" "),l("span",[e._v("("+e._s(e.boxes.length)+")")])]),e._v(" "),l("div",[l("table",{directives:[{name:"show",rawName:"v-show",value:e.boxes.length,expression:"boxes.length"}],staticClass:"mdl-data-table mdl-js-data-table mdl-shadow--2dp"},[e._m(0),e._v(" "),l("tbody",e._l(e.boxes,function(t){return l("tr",{key:t.id,staticClass:"box"},[l("td",[e._v(e._s(t.id))]),e._v(" "),l("td",{staticClass:"mdl-data-table__cell--non-numeric"},[l("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"box.name"}],staticClass:"mdl-textfield__input",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),e._v(" "),l("td",[l("input",{directives:[{name:"model",rawName:"v-model",value:t.num_requirements,expression:"box.num_requirements"}],staticClass:"mdl-textfield__input num-input",attrs:{type:"text",pattern:"[0-9]*"},domProps:{value:t.num_requirements},on:{input:function(e){e.target.composing||(t.num_requirements=e.target.value)}}})]),e._v(" "),l("td",[l("button",{staticClass:"mdl-button mdl-js-button mdl-button--icon",on:{click:function(l){e.removeBox(t)}}},[l("i",{staticClass:"material-icons"},[e._v("remove")])])])])}))])]),e._v(" "),l("div",[l("ul",{directives:[{name:"show",rawName:"v-show",value:e.remainingPlayers,expression:"remainingPlayers"}],staticClass:"mdl-list"},e._l(e.remainingPlayers,function(t){return l("li",{staticClass:"player mdl-list__item"},[e._v("\n        "+e._s(t)+"\n      ")])}))]),e._v(" "),l("hr"),e._v(" "),l("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect",on:{click:function(t){e.clearAllBoxes()}}},[e._v("\n    役を全部クリアする\n  ")])])},staticRenderFns:[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("thead",[l("th",[e._v("ID")]),e._v(" "),l("th",{staticClass:"mdl-data-table__cell--non-numeric"},[e._v("役の名前")]),e._v(" "),l("th",[e._v("数")]),e._v(" "),l("th")])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-tabs",attrs:{id:"app"}},[e._m(0),e._v(" "),l("main",{staticClass:"mdl-layout__content"},[l("section",{staticClass:"mdl-layout__tab-panel is-active mdl-grid",attrs:{id:"scroll-tab-1"}},[l("box-list",{ref:"boxref",attrs:{boxPlayers:e.boxPlayers,remainingPlayers:e.remainingPlayers}})],1),e._v(" "),l("player-list",{attrs:{boxPlayers:e.boxPlayers,remainingPlayers:e.remainingPlayers},on:{matchBoxPlayers:e.players_callback}})],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("header",{staticClass:"mdl-layout__header"},[l("div",{staticClass:"mdl-layout__header-row"},[l("span",{staticClass:"mdl-layout-title"},[e._v("組み合わせを決めよう")])]),e._v(" "),l("div",{staticClass:"mdl-layout__tab-bar mdl-js-ripple-effect"},[l("a",{staticClass:"mdl-layout__tab js-active",attrs:{href:"#scroll-tab-1"}},[e._v("役 (Box)")]),e._v(" "),l("a",{staticClass:"mdl-layout__tab",attrs:{href:"#players-load-panel"}},[e._v("参加者 (Player)")]),e._v(" "),l("a",{staticClass:"mdl-layout__tab",attrs:{href:"#players-match-panel"}},[e._v("組み合わせ結果")])])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"mdl-layout__tab-panel",attrs:{id:"players-load-panel"}},[l("div",{staticClass:"mdl-grid",attrs:{id:"player-list"}},[l("div",{staticClass:"mdl-cell mdl-cell--6-col"},[l("h4",[e._v("1人ずつ登録")]),e._v(" "),l("div",{staticClass:"mdl-cell mdl-cell--6-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},[l("input",{directives:[{name:"model",rawName:"v-model",value:e.newPlayer,expression:"newPlayer"}],staticClass:"new-box mdl-textfield__input",attrs:{id:"new_player",type:"text",autofocus:"",autocomplete:"off",placeholder:""},domProps:{value:e.newPlayer},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.addPlayer(t)},input:function(t){t.target.composing||(e.newPlayer=t.target.value)}}}),e._v(" "),l("label",{staticClass:"mdl-textfield__label",attrs:{for:"new_player"}},[e._v("新しい参加者の名前")])]),e._v(" "),l("ul",{staticClass:"mdl-list"},e._l(e.players,function(t){return l("li",{staticClass:"player mdl-list__item"},[e._v("\n            "+e._s(t.id)+". "+e._s(t.name)+" "+e._s(t.choices)+" : "+e._s(t.boxId)+"\n          ")])}))]),e._v(" "),l("div",{staticClass:"mdl-cell mdl-cell--6-col"},[l("h4",[e._v("まとめて登録")]),e._v(" "),l("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},[l("textarea",{directives:[{name:"model",rawName:"v-model",value:e.importingPlayersCsv,expression:"importingPlayersCsv"}],staticClass:"mdl-textfield__input",attrs:{id:"players_batch_import",type:"text",rows:"10"},domProps:{value:e.importingPlayersCsv},on:{input:function(t){t.target.composing||(e.importingPlayersCsv=t.target.value)}}}),e._v(" "),l("label",{staticClass:"mdl-textfield__label",attrs:{for:"players_batch_import"}},[e._v("取り込む参加者をコピペで貼り付けてください")])]),e._v(" "),l("div",{},[l("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent",on:{click:function(t){e.importPlayers()}}},[e._v("\n            取り込み\n          ")]),e._v(" "),l("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect",on:{click:function(t){e.clearAllPlayers()}}},[e._v("\n            参加者を全部クリアする\n          ")])])])])]),e._v(" "),l("div",{staticClass:"mdl-layout__tab-panel mdl-grid",attrs:{id:"players-match-panel"}},[l("div",{staticClass:"mdl-cell mdl-cell--12-col"},[l("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent",on:{click:function(t){e.matchBoxPlayers()}}},[e._v("\n        組み合わせを探す\n      ")])]),e._v(" "),l("div",[l("div",{staticClass:"mdl-grid"},[e._l(e.boxPlayers,function(t){return l("div",{key:t.id,staticClass:"box-player-card mdl-card mdl-cell mdl-cell--4-col"},[l("div",{staticClass:"mdl-card__title mdl-card--expand"},[l("ul",e._l(t.players,function(t){return l("li",[e._v("\n                "+e._s(t.name)+" "+e._s(t.choices)+"\n              ")])}))]),e._v(" "),l("div",{staticClass:"mdl-card__actions mdl-card--border"},[e._v("\n            "+e._s(t.box.id)+". "+e._s(t.box.name)+" ("+e._s(t.box.num_requirements)+")\n          ")])])}),e._v(" "),l("div",{directives:[{name:"show",rawName:"v-show",value:e.remainingPlayers,expression:"remainingPlayers"}],staticClass:"box-player-card mdl-card mdl-cell mdl-cell--4-col"},[l("div",{staticClass:"mdl-card__title mdl-card--expand"},[l("ul",e._l(e.remainingPlayers,function(t){return l("li",[e._v("\n                "+e._s(t.name)+" "+e._s(t.choices)+"\n              ")])}))]),e._v(" "),l("div",{staticClass:"mdl-card__actions mdl-card--border"},[e._v("\n            割り当てなし\n          ")])])],2)])])])},staticRenderFns:[]}}],[9]);
//# sourceMappingURL=app.c9cda6a56f3343ff89fc.js.map